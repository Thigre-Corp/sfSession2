{% extends 'base.html.twig' %}

{% block title %}Hello FormationController!{% endblock %}

{% block body %}

<div>
    <h1>Hello {{ controller_name }} / HomePage !</h1>

    <h2>Formations Proposées</h2>

    <table class="table table-striped table-bordered">
        <tr>
            <td colspan="4" class="table-active text-center"><h2>Formations Proposées</h2></td>
        </tr>
        <thead class="table-dark">
            <tr>
                <th>
                    Nom
                </th>
                <th>
                    Descritptif
                </th>
                {% if auth  %}
                            <th colspan="2">Administration</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for row in formations %}
                <tr>
                    <td id="nom_{{row.id}}"><a href="{{ path('show_formation', {'id' : row.id} ) }}"> {{row}} </a></td>
                    <td id="decriptif_{{row.id}}">{{row.descriptif}}</td>
                    {% if auth  %}
                    
                        
                    <td><button class="btn btn-warning edit">éditer</button></td> 
                    <td><a href="{{ path('delete_formation', {'id' : row.id} ) }}" class="btn btn-danger"> supprimer </a></td> 

                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% if auth  %}
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addEditModal">
        Ajouter une formation
    </button>

    <!-- Modal -->
    {% if edit  %}
        <div class="modal fade show" id="addEditModal" tabindex="-1" aria-labelledby="addEditModal" aria-modal="true" role="dialog" style="display: block;">
    {% else %}
        <div class="modal fade" id="addEditModal" tabindex="-1" aria-labelledby="addEditModal" aria-hidden="true">
    {% endif %}

            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">

                        {% if edit %}
                            <h5 class="modal-title" id="exampleModalLabel">Editer une formation</h5>
                        {% else %}
                            <h5 class="modal-title" id="exampleModalLabel">Ajouter une formation</h5>
                        {% endif %}

                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                    <div class="modal-body">
                    {{form(formAddFormation)}}
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
{% endif %}
{% endblock %}
